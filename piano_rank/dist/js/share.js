function RankingItem(a,e,t,n,i){this.ranking=a,this.media=1==a?"icon-gold":2==a?"icon-silver":3==a?"icon-copper":"icon-medal",this.avatar=e||"imgs/avatar.png",this.name=t||"-",this.sex=2==n?"icon-female":1==n?"icon-male":"",this.score=i||0}function loadRecordsRank(a,e,t,n){API.getAllRecordsRank(a,PAGE_SIZE,function(a){e&&e(a),"SUCCESS"==a.code&&a.result&&a.result.list&&(a.result.list.forEach(function(a,e){var t=new RankingItem(e+pageOffset_1+1,a.avater,a.nickname,a.gender,a.record);$("#timeRanking .tips").before(t.makeHTML())}),pageOffset_1+=a.result.list.length)},function(a){t&&t(a)},function(a){n&&n()})}function loadDaysRecords(a,e,t,n){API.getAllDaysRank(a,PAGE_SIZE,function(a){e&&e(a),"SUCCESS"==a.code&&a.result&&a.result.list&&(a.result.list.forEach(function(a,e){var t=new RankingItem(e+pageOffset_2+1,a.avater,a.nickname,a.gender,a.insistDay);$("#dayRanking .tips").before(t.makeHTML())}),pageOffset_2+=a.result.list.length)},function(a){t&&t(a)},function(a){n&&n()})}RankingItem.prototype.makeHTML=function(){var a=document.createElement("div");return a.className="item",a.innerHTML='        <div class="left">            <span class="medal icon '+this.media+'">'+(this.ranking>3?this.ranking:"")+'</span>            <img class="avatar" src="'+this.avatar+'" alt="avatar">            <span class="name">'+this.name+'</span>            <span class="sex icon '+this.sex+'"></span>        </div>        <div class="right">'+this.score+"</div>",a};var PAGE_SIZE=10,pageNo_1=1,pageOffset_1=0,hasMore_1=!1,pageNo_2=1,pageOffset_2=0,hasMore_2=!1;$(document).ready(function(){switch($("#avatar").attr("src",utils.getUrlParam("a")||"imgs/avatar.png"),$("#avatar").show(),$("#name").html(utils.getUrlParam("n")||"-"),utils.getUrlParam("s")){case"1":$("#sex").addClass("icon-male");break;case"2":$("#sex").addClass("icon-female")}$("#practiceTime").html(utils.getUrlParam("ar")||0),$("#duration").html(utils.getUrlParam("i")||0),loadRecordsRank(pageNo_1,function(a){"SUCCESS"!=!a.code&&a.result&&(console.log(a),a.result.totalPage>pageNo_1?(pageNo_1++,hasMore_1=!0,$("#timeRanking .tips").html("加载更多")):(hasMore_1=!1,$("#timeRanking .tips").html("没有了~")))},function(a){},function(){}),loadDaysRecords(pageNo_2,function(a){"SUCCESS"!=!a.code&&a.result&&(a.result.totalPage>pageNo_2?(pageNo_2++,hasMore_2=!0,$("#dayRanking .tips").html("加载更多")):(hasMore_2=!1,$("#dayRanking .tips").html("没有了~")))},function(a){},function(){}),$("#timeRanking .tips").click(function(a){hasMore_1&&($("#timeRanking .tips").html("加载中"),loadRecordsRank(pageNo_1,function(a){"SUCCESS"!=!a.code&&a.result&&(a.result.totalPage>pageNo_1?(pageNo_1++,hasMore_1=!0,$("#timeRanking .tips").html("加载更多")):(hasMore_1=!1,$("#timeRanking .tips").html("没有了~")))},function(a){},function(){}))}),$("#dayRanking .tips").click(function(a){hasMore_2&&($("#dayRanking .tips").html("加载中"),loadDaysRecords(pageNo_2,function(a){"SUCCESS"!=!a.code&&a.result&&(a.result.totalPage>pageNo_2?(pageNo_2++,hasMore_2=!0,$("#dayRanking .tips").html("加载更多")):(hasMore_2=!1,$("#dayRanking .tips").html("没有了~")))},function(a){},function(){}))})}),$(document).ready(function(){$("#showTimeRanking").click(function(){$(this).addClass("active"),$("#showDayRanking").removeClass("active"),$("#timeRanking").removeClass("hide"),$("#dayRanking").addClass("hide")}),$("#showDayRanking").click(function(){$(this).addClass("active"),$("#showTimeRanking").removeClass("active"),$("#dayRanking").removeClass("hide"),$("#timeRanking").addClass("hide")})});