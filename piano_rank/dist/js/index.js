function uploadRecord(o,t,e,a){API.uploadRecord(o,t,e,a,function(o){"SUCCESS"!=o.code?weui.alert(o.message,{className:"dialog"}):(weui.toast("记录上传成功",1500),$("#lastRecord").html(t))},function(o){weui.alert("记录上传失败",{className:"dialog"})},function(o){})}$(document).ready(function(){window.localStorage.sessionId&&API.getUserInfo(window.localStorage.sessionId,function(o){"SUCCESS"==o.code&&o.result&&($("#avatar").attr("src",o.result.avater||"imgs/avatar.png"),$("#avatar").removeClass("hide"),$("#name").html(o.result.nickname),$("#sex").addClass(1==o.result.gender?"icon-male":2==o.result.gender?"icon-female":""))},function(o){},function(o){})}),$(document).ready(function(){$("#btnSwitchManual").click(function(){weui.picker(consts.TIME_PICKER_ITEM_HOUR,[{label:"时",value:"-"}],consts.TIME_PICKER_ITEM_MINUTE,[{label:"分",value:"-"}],{className:"picker",container:"body",defaultValue:[0,0,0],onChange:function(o){},onConfirm:function(o){var t=60*o[0].value+o[2].value;t<1||!window.localStorage.sessionId||uploadRecord(window.localStorage.sessionId,t)}})})}),$(document).ready(function(){var o=!1,t=0,e=0,a=0;"true"==window.localStorage.timerFlag&&(t=parseInt(window.localStorage.hours||0),e=parseInt(window.localStorage.minutes||0),a=parseInt(window.localStorage.seconds||0),$("#hours").html(utils.formatTime(t)),$("#minutes").html(utils.formatTime(e)),$("#seconds").html(utils.formatTime(a)));var n=new MyTimer(t,e,a,function(o,t,e){window.localStorage.hours=o,window.localStorage.minutes=t,window.localStorage.seconds=e,$("#hours").html(utils.formatTime(o)),$("#minutes").html(utils.formatTime(t)),$("#seconds").html(utils.formatTime(e))},function(o,t,e){},function(o,t,e){var a=60*o+t+parseInt(e/60);a<1||!window.localStorage.sessionId||weui.confirm("是否确定上传记录？",function(){uploadRecord(window.localStorage.sessionId,a,null,null)},function(){console.log("取消上传记录")},{className:"confirm"})},function(o,t,e){$("#hours").html("00"),$("#minutes").html("00"),$("#seconds").html("00")});"true"==window.localStorage.timerFlag&&(o=!0,$("#btnSwitch").addClass("active"),n.start()),$("#btnSwitch").click(function(){o?($(this).removeClass("active"),o=!1,n.stop()):($(this).addClass("active"),o=!0,n.start()),window.localStorage.timerFlag=o}),$("#btnRestart").click(function(){n.restart()})});