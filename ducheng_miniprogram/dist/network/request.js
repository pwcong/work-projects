"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function request(e,t,r,a){var u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return new Promise(function(o,s){_wepy2.default.request({url:e,method:t,data:r,header:a,success:function(e){if(200==e.statusCode){if(e&&e.data&&u&&RELAUNCH_CODES.indexOf(e.data.code)>-1){var t=e.data.message;return _wepy2.default.removeStorageSync("user"),_wepy2.default.removeStorageSync("token"),_wepy2.default.removeStorageSync("secret"),_wepy2.default.removeStorageSync("time_step"),_wepy2.default.removeStorageSync("branch"),void _wepy2.default.reLaunch({url:"../index?msg="+t})}e.data&&e.data.success?o(e.data):s(e.data.message)}else s(e.errMsg)},fail:function(e){s("发送请求失败，请稍后重试")}})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RELAUNCH_CODES=void 0,exports.default=request;var _wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),RELAUNCH_CODES=exports.RELAUNCH_CODES=["LOGIN_REQUIRED","LOGIN_TOKEN_INVALID","LOGIN_SESSION_EXPIRED","LOGIN_USER_NOT_EXISTS","LOGIN_USER_SUSPENDED"];